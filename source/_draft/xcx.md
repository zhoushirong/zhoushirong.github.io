---
title: 小程序开发入门
date: 2018/02/26
tag: 小程序 微信开发
---

### 微信平台

##### 微信开放平台（https://open.weixin.qq.com）
主要面对移动应用/网站应用开发者，为其提供微信登录、分享、支付等相关权限和服务

注意：开放平台的功能需要进行开发者资质认证，个人用户申请不了开发者资质，因此接入不了微信扫一扫登录等功能

##### 微信公众平台（https://mp.weixin.qq.com）
小程序/小游戏、公众号

注意： 
```html
1.小程序/小游戏 和 公众号不能使用同一个账号; 
2.公众号可以关联小程序，关联小程序之后再公众号的资料页将会出现小程序的入口
```


### 小程序开发

#### 1.什么是小程序
官方说法：微信小程序是一种全新的连接用户与服务的方式，它可以在微信内被便捷地获取和传播，同时具有出色的使用体验。</br>
通俗说法：置于微信APP内部的，能够调用微信提供的接口一个工具

#### 2.小程序基本目录结构
```html
-assest # 资源文件，比如图片，音乐，视频
  demo.jpg
-pages # 页面文件夹，存放页面
	-index # 页面，包含单个页面的html、css、js、json
		index.js # js文件
		index.wxs # WXS（WeiXin Script）是小程序的一套脚本语言，结合 WXML，可以构建出页面的结构。
		index.wxml # 类似html
		index.wxss # 类似css
		index.json # 页面配置文件
app.js # 定义 App 实例
app.json # 全局配置
app.wxss # 全局配置
project.config.json # 项目配置文件
```

#### 3.小程序运行过程
微信APP在打开小程序之前，会把整个小程序的代码包下载到本地。
紧接着通过 app.json 的 pages 字段就可以知道你当前小程序的所有页面路径:
```javascript
{  
	"pages":[
		"pages/index/index",
		"pages/details/details"
  ]
}
```
如：此项目定义了两个页面，分别位于 pages/index 和 pages/details 目录。
而写在 pages 字段的第一个页面就是这个小程序的首页(打开小程序看到的第一个页面)
上面的配置表示打开小程序之后第一个看到的页面是index

小程序启动之后，在 app.js 定义的 App 实例的 onLaunch 回调会被执行:
```javascript
App({
  onLaunch: function () {    // 小程序启动之后 触发
  	// do something
  }
})
```
注意：整个小程序只有一个 App 实例，是全部页面共享的

pages/index目录下可以有5种文件，js/wxs/wxml/wxss/json
微信客户端会先根据 index.json 配置生成一个界面，顶部的颜色和文字你都可以在这个 json 文件里边定义好。
紧接着客户端就会装载这个页面的 wxml 结构和 WXSS 样式。
最后装载 index.js/index.wxs

在渲染完界面之后，页面实例就会收到一个 onLoad 的回调，你可以在这个回调处理你的逻辑。

以上就是整个小程序的基本介绍，接下来是一个完整小程序的开发过程。

---

### 小程序实战开发

#### 1.准备工作
```html
0.准备一个https的域名，最好是有接口的，方便后面开发。
1.打开微信公众平台（https://mp.weixin.qq.com），注册并下载微信开发者工具（注意：邮箱账号必须是未在微信公众号 或者 开放平台注册过的）
2.登录 - 设置 - 完善基本设置和开发设置，包括域名等的配置
3.点击文档 - 开发者工具的使用，下载微信开发者工具
4.创建新项目，绑定appid
```
ps:邮箱不够，可以在qq邮箱中设置-账户注册（手机号码、qq号码、foxmail、英文邮箱），这几个可以账号可以进入同一个邮箱、但是可以作为独立账号存在


#### 2.开发一个小小程序
```html
demo地址: https://github.com/zhoushirong/xcx.epoos.com
```

#### 3.发布与审核
```html
1.在开发者工具中点击上传，填写版本号等信息
2.公众平台后台 - 开发管理中有一个开发版本中会看到之前提交的开发版本
3.提交审核（注意：提交审核会服务类型需要慎重填写，不然可能会被拒绝）
```
##### 微信小程序平台常见拒绝情形
https://mp.weixin.qq.com/debug/wxadoc/product/reject.html#36-UI-规范


#### 4.维护与更新
提交新版本即可


#### 5.小程序能做什么
##### 小程序主体类型：个人、企业、政府、媒体、其他组织

帐号主体 | 范围
-|-
个人 | 18岁以上有国内身份信息的微信实名用户
企业 | 企业、分支机构、企业相关品牌。
企业（个体工商户） | 个体工商户。
政府 | 国内、各级、各类政府机构、事业单位、具有行政职能的社会组织等。目前主要覆盖公安机构、党团机构、司法机构、交通机构、旅游机构、工商税务机构、市政机构等。
媒体 | 报纸、杂志、电视、电台、通讯社、其他等。
其他组织 | 不属于政府、媒体、企业或个人的类型。

##### 面向个人开发者开放的服务类目
表格太长，不在这里列出，详情可以访问小程序文档官网
https://mp.weixin.qq.com/debug/wxadoc/introduction/#面向个人开发者开放的服务类目

##### 绑定开发者
登录微信公众平台小程序，进入用户身份- 开发者，新增绑定开发者。

类型 | 开发者 | 体验者
- | -
个人主体小程序 | 可绑定5个开发者 | 10个体验者
未认证的组织类型小程序 | 可绑定10个开发者 | 20个体验者
已认证的小程序 | 可绑定20个开发者 | 40个体验者


#### 6.小程序开发常见问题

```html

```
可参考：开发者工具 - 微信开发者工具 - 开发者社区

##### 微信分享
https://mp.weixin.qq.com/wiki?t=resource/res_main&id=mp1445241432





